<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/dist/ScrollTrigger";
  import { onMount } from "svelte";

  gsap.registerPlugin(ScrollTrigger);

  onMount(() => {
    gsap.to(".gsap-path", {
      duration: 1.5,
      opacity: 1,
      stagger: 0.05,
    });

    gsap.to(".sternfilms", {
      delay: 0,
      duration: 2,
      opacity: 1,
      ease: "power4.out",
    });

    gsap.from(".sternfilms", {
      delay: 0.5,
      "--progress": 1,
      duration: 2,
      ease: "power4.out",
    });

    gsap.to(".gsap-path", {
      delay: 2.5,
      duration: 1,
      opacity: 0,
      ease: "power4.out",
    });

    gsap.to(".sternfilms", {
      delay: 2.5,
      duration: 1,
      opacity: 0,
      ease: "power4.out",
    });

    gsap.to(".gsap-reveal", {
      delay: 3,
      duration: 1.5,
      ease: "power1.out",
      opacity: 0,
    });
  });
</script>

<section class="gsap-reveal">
  <div class="logo-wrapper">
    <svg
      class="sternfilms"
      width="422"
      height="76"
      viewBox="0 0 422 76"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M380.847 56.404V13.9212H396.025V19.5543C398.685 14.7036 402.91 12.4347 407.839 12.4347C415.506 12.4347 422 17.2072 422 28.1604V56.404H406.822V31.2116C406.822 26.4391 405.101 24.5615 401.893 24.5615C398.451 24.5615 396.025 27.378 396.025 32.4634V56.404H380.847Z"
        fill="#ECECE2"
      />
      <path
        d="M355.698 56.3257C344.98 56.3257 338.095 47.8761 338.095 34.4193C338.095 20.4149 345.136 12.4347 355.698 12.4347C359.845 12.4347 363.209 14.1559 365.634 17.4419V13.9212H380.812V57.8905C380.812 68.9219 372.519 75.1809 360.549 75.1809C349.283 75.1809 340.911 70.4084 339.425 59.6899H354.603C354.916 62.35 357.419 63.8365 360.314 63.8365C363.444 63.8365 365.634 62.7412 365.634 57.9687V51.0838C363.131 54.5263 359.767 56.3257 355.698 56.3257ZM359.61 44.199C363.6 44.199 365.634 40.8348 365.634 34.4193C365.634 28.0039 363.6 24.5615 359.61 24.5615C355.698 24.5615 353.664 28.0039 353.664 34.4193C353.664 40.8348 355.698 44.199 359.61 44.199Z"
        fill="#ECECE2"
      />
      <path
        d="M324.449 10.6353V0.0732422H339.627V10.6353H324.449ZM324.449 56.404V13.9212H339.627V56.404H324.449Z"
        fill="#ECECE2"
      />
      <path
        d="M300.777 26.2044C300.777 32.5416 326.204 26.6739 326.204 42.9472C326.204 51.6315 318.067 57.8905 306.332 57.8905C295.222 57.8905 287.007 53.118 285.521 42.3995H300.699C301.012 45.0596 303.437 46.5461 306.723 46.5461C309.618 46.5461 311.026 45.6072 311.026 43.886C311.026 37.7053 286.303 43.6513 286.303 26.9868C286.303 19.476 292.406 12.4347 304.454 12.4347C315.251 12.4347 323.466 17.3636 324.639 28.0821H309.54C308.992 25.1873 307.193 23.7791 304.063 23.7791C302.185 23.7791 300.777 24.7179 300.777 26.2044Z"
        fill="#ECECE2"
      />
      <path
        d="M288.674 42.3995C286.561 52.1009 278.19 57.8905 267.237 57.8905C253.623 57.8905 245.017 49.1279 245.017 35.2017C245.017 20.7278 253.702 12.4347 266.767 12.4347C279.989 12.4347 288.361 21.0408 288.361 35.1235V38.4094H260.586C261.291 43.4166 263.481 46.0767 267.237 46.0767C270.053 46.0767 271.696 44.9813 272.791 42.3995H288.674ZM266.767 24.2485C263.638 24.2485 261.682 26.3609 260.821 30.4292H272.713C271.853 26.3609 269.897 24.2485 266.767 24.2485Z"
        fill="#ECECE2"
      />
      <path
        d="M221.433 57.8905C210.714 57.8905 203.83 49.1279 203.83 35.2017C203.83 20.7278 210.871 12.4347 221.433 12.4347C225.58 12.4347 228.944 14.2342 231.369 17.5984V0.0732422H246.547V56.404H231.369V52.4921C228.865 56.0128 225.501 57.8905 221.433 57.8905ZM225.345 45.7637C229.335 45.7637 231.369 42.0866 231.369 35.2017C231.369 28.2386 229.335 24.5615 225.345 24.5615C221.433 24.5615 219.399 28.2386 219.399 35.2017C219.399 42.0866 221.433 45.7637 225.345 45.7637Z"
        fill="#ECECE2"
      />
      <path
        d="M178.8 56.404V13.9212H193.978V19.476C196.56 14.5471 200.393 12.4347 204.227 12.4347C206.026 12.4347 207.669 12.9041 208.53 13.9212V26.5956C206.965 26.2827 205.557 26.1262 203.523 26.1262C197.029 26.1262 193.978 29.4904 193.978 35.5929V56.404H178.8Z"
        fill="#ECECE2"
      />
      <path
        d="M180.544 42.3995C178.432 52.1009 170.061 57.8905 159.107 57.8905C145.494 57.8905 136.888 49.1279 136.888 35.2017C136.888 20.7278 145.572 12.4347 158.638 12.4347C171.86 12.4347 180.231 21.0408 180.231 35.1235V38.4094H152.457C153.161 43.4166 155.352 46.0767 159.107 46.0767C161.924 46.0767 163.567 44.9813 164.662 42.3995H180.544ZM158.638 24.2485C155.508 24.2485 153.553 26.3609 152.692 30.4292H164.584C163.723 26.3609 161.767 24.2485 158.638 24.2485Z"
        fill="#ECECE2"
      />
      <path
        d="M113.304 57.8905C102.585 57.8905 95.7004 49.1279 95.7004 35.2017C95.7004 20.7278 102.742 12.4347 113.304 12.4347C117.45 12.4347 120.815 14.2342 123.24 17.5984V0.0732422H138.418V56.404H123.24V52.4921C120.736 56.0128 117.372 57.8905 113.304 57.8905ZM117.216 45.7637C121.206 45.7637 123.24 42.0866 123.24 35.2017C123.24 28.2386 121.206 24.5615 117.216 24.5615C113.304 24.5615 111.27 28.2386 111.27 35.2017C111.27 42.0866 113.304 45.7637 117.216 45.7637Z"
        fill="#ECECE2"
      />
      <path
        d="M82.0547 56.404V0.0732422H97.2328V56.404H82.0547Z"
        fill="#ECECE2"
      />
      <path
        d="M83.7992 42.3995C81.6868 52.1009 73.3155 57.8905 62.3623 57.8905C48.749 57.8905 40.1429 49.1279 40.1429 35.2017C40.1429 20.7278 48.8272 12.4347 61.8928 12.4347C75.1149 12.4347 83.4863 21.0408 83.4863 35.1235V38.4094H55.7121C56.4162 43.4166 58.6069 46.0767 62.3623 46.0767C65.1788 46.0767 66.8218 44.9813 67.9171 42.3995H83.7992ZM61.8928 24.2485C58.7634 24.2485 56.8074 26.3609 55.9468 30.4292H67.8389C66.9782 26.3609 65.0223 24.2485 61.8928 24.2485Z"
        fill="#ECECE2"
      />
      <path
        d="M0.52002 56.404V0.0732422H15.698V19.5543C18.3581 14.7036 22.5829 12.4347 27.5118 12.4347C35.1791 12.4347 41.6728 17.2072 41.6728 28.1604V56.404H26.4947V31.2116C26.4947 26.4392 24.7735 24.5615 21.5658 24.5615C18.1234 24.5615 15.698 27.378 15.698 32.4634V56.404H0.52002Z"
        fill="#ECECE2"
      />
    </svg>
  </div>
</section>

<style>
  section {
    position: fixed;
    height: 100svh;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    top: 0;
    left: 0;
    z-index: 9999999;
    background-color: var(--darker);
    pointer-events: none;
  }

  .gsap-path {
    opacity: 0;
  }

  .logo-wrapper {
    width: 50%;
    display: flex;
    gap: 1rem;
    font-size: 3rem;
    opacity: 0.7;
    align-items: center;
    justify-content: center;
  }

  svg {
    opacity: 1;
  }

  .sternfilms {
    clip-path: polygon(
      0 0,
      calc((1 - var(--progress)) * 100%) 0,
      calc((1 - var(--progress)) * 100%) 100%,
      0% 100%
    );
    opacity: 0;
  }

  @media (max-width: 768px) {
    .logo-wrapper {
      width: 100%;
      font-size: 2rem;
    }
  }
</style>
