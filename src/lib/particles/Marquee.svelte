<script>
  import { onMount } from "svelte";
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/dist/ScrollTrigger";

  import image from "$lib/assets/60 copy Large.jpeg";

  let marqueeWrapper;

  onMount(() => {
    gsap.registerPlugin(ScrollTrigger);

    gsap.to(".marquee__wrapper", {
      scrollTrigger: {
        trigger: marqueeWrapper,
        start: "top" - window.innerHeight,
        end: "top",
        scrub: 1,
      },
      scale: 0.8,
    });
  });
</script>

<div class="overflow__fix">
  <div class="marquee__wrapper" bind:this={marqueeWrapper}>
    <div class="marquee__container">
      <svg
        viewBox="0 0 2131 264"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M2131 6.23828V68.5531H2062.96V256.93H1993.48V68.5531H1925.43V6.23828H2131Z"
          fill="# "
        />
        <path
          d="M1850.09 6.23828H1919.57V256.93H1850.09V160.951H1774.89V256.93H1705.05V6.23828H1774.89V96.8454H1850.09V6.23828Z"
          fill="# "
        />
        <path
          d="M1569.61 263.371C1493.33 263.371 1436.38 206.786 1436.38 131.937C1436.38 56.7292 1493.33 0.144531 1569.61 0.144531C1635.15 0.144531 1686 43.4784 1696.39 106.868H1626.19C1617.6 81.4403 1596.11 64.6081 1569.61 64.6081C1534.15 64.6081 1508.01 93.2586 1508.01 131.937C1508.01 170.615 1534.15 198.907 1569.61 198.907C1597.54 198.907 1619.39 180.643 1626.55 152.708H1697.1C1687.43 218.604 1636.22 263.371 1569.61 263.371Z"
          fill="# "
        />
        <path d="M1355.79 256.93V6.23828H1425.98V256.93H1355.79Z" fill="# " />
        <path
          d="M1260.8 193.899H1349.97V256.93H1190.6V6.23828H1260.8V193.899Z"
          fill="# "
        />
        <path
          d="M1181.5 256.93H1111.66L1092.32 112.603L1025.71 257.646H1005.29L939.041 112.961L919.702 256.93H849.508L887.47 6.23828H956.589L1015.68 142.686L1075.13 6.23828H1143.89L1181.5 256.93Z"
          fill="# "
        />
        <path
          d="M781.898 256.93L741.071 180.29H716.002V256.93H646.883V6.23828H755.755C809.474 6.23828 848.869 42.7676 848.869 95.0548C848.869 125.854 833.827 151.281 809.116 165.965L858.896 256.93H781.898ZM716.002 67.8368V122.273H747.518C766.857 122.273 777.959 110.454 777.959 95.0548C777.959 79.297 766.857 67.8368 747.518 67.8368H716.002Z"
          fill="# "
        />
        <path
          d="M537.515 197.122H632.42V256.93H468.754V6.23828H629.197V66.0461H537.515V102.934H619.885V159.518H537.515V197.122Z"
          fill="# "
        />
        <path
          d="M333.315 263.371C257.033 263.371 200.09 206.786 200.09 131.937C200.09 56.7292 257.033 0.144531 333.315 0.144531C398.853 0.144531 449.707 43.4784 460.093 106.868H389.899C381.304 81.4403 359.816 64.6081 333.315 64.6081C297.86 64.6081 271.716 93.2586 271.716 131.937C271.716 170.615 297.86 198.907 333.315 198.907C361.249 198.907 383.095 180.643 390.257 152.708H460.809C451.14 218.604 399.927 263.371 333.315 263.371Z"
          fill="# "
        />
        <path
          d="M101.637 263.372C40.3971 263.372 0.644531 230.782 0.644531 175.988H71.9126C71.9126 193.895 85.8797 202.848 101.637 202.848C115.963 202.848 129.93 194.969 129.93 181.36C129.93 165.602 110.233 160.947 86.2378 155.216C50.0666 146.263 3.86771 135.161 3.86771 78.2183C3.86771 28.7962 40.0389 0.503906 99.1305 0.503906C159.297 0.503906 194.035 31.3031 194.035 82.5159H124.558C124.558 66.4 112.74 58.8792 98.4143 58.8792C86.2378 58.8792 74.4195 64.2512 74.4195 76.0695C74.4195 90.3948 93.4004 95.0505 116.679 101.139C153.925 110.45 201.914 122.985 201.914 179.928C201.914 234.722 160.013 263.372 101.637 263.372Z"
          fill="# "
        />
      </svg>

      <img class="image" src={image} alt="" />
      <!-- Duplicate the content to create an infinite loop effect -->
      <svg
        viewBox="0 0 2131 264"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M2131 6.23828V68.5531H2062.96V256.93H1993.48V68.5531H1925.43V6.23828H2131Z"
          fill="# "
        />
        <path
          d="M1850.09 6.23828H1919.57V256.93H1850.09V160.951H1774.89V256.93H1705.05V6.23828H1774.89V96.8454H1850.09V6.23828Z"
          fill="# "
        />
        <path
          d="M1569.61 263.371C1493.33 263.371 1436.38 206.786 1436.38 131.937C1436.38 56.7292 1493.33 0.144531 1569.61 0.144531C1635.15 0.144531 1686 43.4784 1696.39 106.868H1626.19C1617.6 81.4403 1596.11 64.6081 1569.61 64.6081C1534.15 64.6081 1508.01 93.2586 1508.01 131.937C1508.01 170.615 1534.15 198.907 1569.61 198.907C1597.54 198.907 1619.39 180.643 1626.55 152.708H1697.1C1687.43 218.604 1636.22 263.371 1569.61 263.371Z"
          fill="# "
        />
        <path d="M1355.79 256.93V6.23828H1425.98V256.93H1355.79Z" fill="# " />
        <path
          d="M1260.8 193.899H1349.97V256.93H1190.6V6.23828H1260.8V193.899Z"
          fill="# "
        />
        <path
          d="M1181.5 256.93H1111.66L1092.32 112.603L1025.71 257.646H1005.29L939.041 112.961L919.702 256.93H849.508L887.47 6.23828H956.589L1015.68 142.686L1075.13 6.23828H1143.89L1181.5 256.93Z"
          fill="# "
        />
        <path
          d="M781.898 256.93L741.071 180.29H716.002V256.93H646.883V6.23828H755.755C809.474 6.23828 848.869 42.7676 848.869 95.0548C848.869 125.854 833.827 151.281 809.116 165.965L858.896 256.93H781.898ZM716.002 67.8368V122.273H747.518C766.857 122.273 777.959 110.454 777.959 95.0548C777.959 79.297 766.857 67.8368 747.518 67.8368H716.002Z"
          fill="# "
        />
        <path
          d="M537.515 197.122H632.42V256.93H468.754V6.23828H629.197V66.0461H537.515V102.934H619.885V159.518H537.515V197.122Z"
          fill="# "
        />
        <path
          d="M333.315 263.371C257.033 263.371 200.09 206.786 200.09 131.937C200.09 56.7292 257.033 0.144531 333.315 0.144531C398.853 0.144531 449.707 43.4784 460.093 106.868H389.899C381.304 81.4403 359.816 64.6081 333.315 64.6081C297.86 64.6081 271.716 93.2586 271.716 131.937C271.716 170.615 297.86 198.907 333.315 198.907C361.249 198.907 383.095 180.643 390.257 152.708H460.809C451.14 218.604 399.927 263.371 333.315 263.371Z"
          fill="# "
        />
        <path
          d="M101.637 263.372C40.3971 263.372 0.644531 230.782 0.644531 175.988H71.9126C71.9126 193.895 85.8797 202.848 101.637 202.848C115.963 202.848 129.93 194.969 129.93 181.36C129.93 165.602 110.233 160.947 86.2378 155.216C50.0666 146.263 3.86771 135.161 3.86771 78.2183C3.86771 28.7962 40.0389 0.503906 99.1305 0.503906C159.297 0.503906 194.035 31.3031 194.035 82.5159H124.558C124.558 66.4 112.74 58.8792 98.4143 58.8792C86.2378 58.8792 74.4195 64.2512 74.4195 76.0695C74.4195 90.3948 93.4004 95.0505 116.679 101.139C153.925 110.45 201.914 122.985 201.914 179.928C201.914 234.722 160.013 263.372 101.637 263.372Z"
          fill="# "
        />
      </svg>

      <img class="image" src={image} alt="" />
    </div>
  </div>
</div>

<style>
  .marquee__wrapper {
    position: relative;

    width: 100%;
    height: max-content;

    transform: translateX(-20%) scale(0.5);
  }

  .marquee__container {
    display: flex;
    gap: 1rem;
    width: max-content;
    justify-content: center;
    animation: marquee 20s linear infinite;
  }

  svg {
    position: relative;
    height: 40svh;
    fill: var(--darker);
  }

  .image {
    position: relative;
    object-fit: cover;
    aspect-ratio: 1;
    height: 40svh;
  }

  @keyframes marquee {
    0% {
      transform: translateX(0%);
    }
    100% {
      transform: translateX(-50%);
    }
  }
</style>
